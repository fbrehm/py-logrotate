#!/usr/bin/env python3
# -*- coding: utf-8 -*-

'''
@author: Frank Brehm
@contact: frank@brehm-online.com
@license: GPL3
@copyright: (c) 2010-2011 by Frank Brehm, Berlin
@version: 0.9.1
@summary: rotates and compress system logs
'''
from __future__ import print_function

import sys

if sys.version_info[0] != 3:
    print("This script is intended to use with Python3.", file=sys.stderr)
    print("You are using Python: {0}.{1}.{2}-{3}-{4}.\n".format(
        *sys.version_info), file=sys.stderr)
    sys.exit(1)

if sys.version_info[1] < 4:
    print("A minimal Python version of 3.4 is necessary to execute this script.", file=sys.stderr)
    print("You are using Python: {0}.{1}.{2}-{3}-{4}.\n".format(
        *sys.version_info), file=sys.stderr)
    sys.exit(1)

import os
import logging
import locale
from pathlib import Path

# own modules:
my_path = Path(__file__)
my_real_path = my_path.resolve()
bin_path = my_real_path.parent
base_dir = bin_path.parent
lib_dir = base_dir.joinpath('lib')
module_dir = lib_dir.joinpath('logrotate')

if module_dir.exists():
    sys.path.insert(0, str(lib_dir))

from logrotate.app import LogrotateApplication

log = logging.getLogger(__name__)

__author__ = 'Frank Brehm <frank@brehm-online.com>'
__copyright__ = '(C) 2019 by Frank Brehm, Berlin'

appname = os.path.basename(sys.argv[0])

locale.setlocale(locale.LC_ALL, '')

app = LogrotateApplication(appname=appname, base_dir=base_dir)
app.initialized = True

if app.verbose > 2:
    print("{c}-Object:\n{a}".format(c=app.__class__.__name__, a=app))

app()

sys.exit(0)


#========================================================================

# vim: fileencoding=utf-8 filetype=python ts=4 expandtab
